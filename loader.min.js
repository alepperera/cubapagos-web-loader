(function () { const DEFAULTS = { brandColor: '#22AD01', dark: '#0a0a0a', bg: '#ffffff', logoUrl: 'https: message: 'Loading Cubapagos…', zIndex: 99999 }; function createStyles(opts) { const css = ` .cp-loader__overlay {position:fixed;inset:0;z-index:${opts.zIndex}; display:flex;align-items:center;justify-content:center; background:${opts.bg};transition:opacity .35s ease,visibility .35s ease;} .cp-loader__hidden{opacity:0;visibility:hidden;} .cp-loader__card{display:flex;flex-direction:column;align-items:center;gap:16px; padding:24px 28px;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.08); background:#fff;border:1px solid rgba(0,0,0,.06);max-width:320px;width:calc(100% - 48px);} .cp-loader__logo{width:64px;height:64px;object-fit:contain;display:${opts.logoUrl ? 'block':'none'};} .cp-loader__spinner{width:42px;height:42px;border-radius:50%; border:3px solid rgba(0,0,0,.08);border-top-color:${opts.brandColor}; animation:cp-spin 1s linear infinite;} @keyframes cp-spin{to{transform:rotate(360deg);}} .cp-loader__bar{width:100%;height:8px;background:#f2f2f2;border-radius:999px;overflow:hidden; border:1px solid rgba(0,0,0,.06);} .cp-loader__bar-fill{height:100%;width:0%; background:linear-gradient(90deg,${opts.brandColor},${opts.dark});transition:width .25s ease;} .cp-loader__text{font:600 14px/1.2 ui-sans-serif,-apple-system,Segoe UI,Roboto,Inter,system-ui,Arial; color:${opts.dark};text-align:center;} .cp-loader__hint{font:12px/1.2 ui-sans-serif,-apple-system,Segoe UI,Roboto,Inter,system-ui,Arial; color:#666;text-align:center;} `; const tag=document.createElement('style');tag.id='cp-loader-styles';tag.textContent=css;document.head.appendChild(tag); } function createDOM(opts) { const overlay=document.createElement('div');overlay.className='cp-loader__overlay';overlay.id='cp-loader'; overlay.innerHTML=` <div class="cp-loader__card" role="status" aria-live="polite"> <img src="${opts.logoUrl}" alt="Cubapagos logo" class="cp-loader__logo"/> <div class="cp-loader__spinner" aria-hidden="true"></div> <div class="cp-loader__bar"><div class="cp-loader__bar-fill" id="cp-loader-fill"></div></div> <div class="cp-loader__text" id="cp-loader-text">${opts.message}</div> <div class="cp-loader__hint">Starting Flutter…</div> </div>`; document.body.appendChild(overlay); } function ensureOnce(id){const existing=document.getElementById(id);if(existing)existing.remove();} const API={ mounted:false, mount(userOptions){ if(this.mounted)return; const opts=Object.assign({},DEFAULTS,userOptions||{}); ensureOnce('cp-loader-styles');createStyles(opts); ensureOnce('cp-loader');createDOM(opts);this.mounted=true;}, setMessage(msg){const el=document.getElementById('cp-loader-text');if(el)el.textContent=msg;}, setProgress(pct){const fill=document.getElementById('cp-loader-fill');if(fill)fill.style.width=Math.max(0,Math.min(100,pct))+'%';}, remove(){const overlay=document.getElementById('cp-loader');if(!overlay)return; overlay.classList.add('cp-loader__hidden');setTimeout(()=>overlay.remove(),400);this.mounted=false;} }; window.CubapagosLoader=API; document.addEventListener('DOMContentLoaded',()=>{if(!API.mounted)API.mount();}); })();